---
// src/components/HeaderFixed.astro
// Принимаем activeLink для подсветки активного пункта
const { activeLink = "Главная" } = Astro.props;
---

<header>
    <div class="container nav-flex">
        <div class="logo">IT<span>37</span></div>

        <button class="menu-toggle" aria-label="Открыть меню">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>

        <nav class="nav-links">
            <a href="/" class={activeLink === 'Главная' ? 'active' : ''}>Главная</a>
            <a href="/design" class={activeLink === 'Проектирование' ? 'active' : ''}>Проектирование</a>
            <a href="/montazh" class={activeLink === 'Монтаж' ? 'active' : ''}>Монтаж</a>
            <a href="/control" class={activeLink === 'Диспетчеризация' ? 'active' : ''}>Диспетчеризация</a>
            <a href="/metrologia" class={activeLink === 'Метрология' ? 'active' : ''}>Метрология</a>
            <a href="/maintenance" class={activeLink === 'Обслуживание' ? 'active' : ''}>Обслуживание</a>
            <a href="/contacts" class={activeLink === 'Контакты' ? 'active' : ''}>Контакты</a>
        </nav>
        <a href="/contacts" class="btn primary desktop-only">Запрос на аудит</a>
    </div>
</header>

<script>
    // Логика бургер-меню
    document.addEventListener('DOMContentLoaded', () => {
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');

        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', () => {
                navLinks.classList.toggle('open');
                menuToggle.classList.toggle('open');
            });

            navLinks.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('open');
                    menuToggle.classList.remove('open');
                });
            });
        }
    });
</script>

<style>
    /* Стили для бургер-меню и навигации */
    .menu-toggle {
        display: none; /* Скрыто на больших экранах */
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 10px;
        z-index: 101;
        margin-left: auto;
        order: 2;
    }

    .menu-toggle .bar {
        display: block;
        width: 25px;
        height: 3px;
        margin: 5px 0;
        background-color: var(--accent);
        transition: 0.4s;
        border-radius: 1px;
    }

    .btn.desktop-only {
        order: 3;
    }

    @media (max-width: 900px) {
        .nav-links {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: var(--bg-deep);
            padding-top: 100px;
            flex-direction: column;
            gap: 0;
            transform: translateX(100%);
            transition: transform 0.4s ease-in-out;
            z-index: 99;
        }

        .nav-links.open {
            transform: translateX(0);
        }

        .nav-links a {
            padding: 15px 24px;
            border-bottom: 1px solid var(--border);
            width: 100%;
            display: block;
        }

        .menu-toggle {
            display: block;
        }

        .btn.desktop-only {
            display: none;
        }
    }
</style>