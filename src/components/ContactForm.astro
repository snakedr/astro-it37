<form id="contactForm">
    <style>
        #contactForm label, 
        #contactForm input[type="text"], 
        #contactForm input[type="email"], 
        #contactForm textarea {
            display: block; /* Заставляет каждый элемент занимать всю ширину */
            margin-bottom: 15px; /* Добавляет отступ между полями */
            width: 100%; /* Занимает всю доступную ширину контейнера формы */
            padding: 8px;
            box-sizing: border-box; /* Важно, чтобы padding не ломал ширину */
        }
        #contactForm textarea {
            resize: vertical;
        }
    </style>

    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required>

    <label for="message">Message:</label>
    <textarea id="message" name="message" rows="4" required></textarea>

    <button type="submit">Send Application</button>
    
    <p id="formStatus" style="margin-top: 10px; font-weight: bold;"></p>
</form>

<script>
    const form = document.getElementById('contactForm');
    const statusMessage = document.getElementById('formStatus');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        statusMessage.style.color = 'gray';
        statusMessage.textContent = 'Sending...';

        try {
            // Send data to the API route /api/submit
            const response = await fetch('/api/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data),
            });

            if (response.ok) {
                statusMessage.style.color = 'green';
                statusMessage.textContent = 'Application sent successfully!';
                form.reset();
            } else {
                const error = await response.json();
                statusMessage.style.color = 'red';
                statusMessage.textContent = `Error: ${error.message || 'Server error'}`;
            }
        } catch (error) {
            statusMessage.style.color = 'red';
            statusMessage.textContent = 'Network error. Please try again.';
        }
    });
</script>