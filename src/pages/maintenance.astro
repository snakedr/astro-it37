---
import MainLayout from '@/layouts/MainLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro'; 
import MaintenanceViz from '@/components/MaintenanceViz.astro';
import ConstrainedContactBanner from '@/components/ConstrainedContactBanner.astro'; 
import MaintenanceCards from '@/components/MaintenanceCards.astro';
import ProactiveMaintenanceInfo from '@/components/ProactiveMaintenanceInfo.astro';

const ACTIVE_LINK = "Обслуживание";
---

<MainLayout title="Обслуживание и Ремонт | IT37" activeLink={ACTIVE_LINK}>
  <Header activeLink={ACTIVE_LINK} />
  
  <section class="hero-page">
    <div class="container">
      <h1 style="color:var(--success);">Техническое Обслуживание</h1>
      <p>
        Обеспечение бесперебойной работы узлов учета. <strong>Превентивное</strong> и <strong>абонентское</strong> обслуживание, позволяющее избежать аварийных ситуаций и штрафов со стороны ресурсоснабжающих организаций.
      </p>
      <a href="#contact-block" class="btn">Запросить договор на обслуживание</a>
    </div>
  </section>

  <section class="section" style="padding-top: 0;">
    <MaintenanceCards />
    
    <div class="container"> 
        <div class="proactive-layout"> 
            <ProactiveMaintenanceInfo class="text-block" />
            <MaintenanceViz class="viz-block" />
        </div>
    </div>
  </section>

  {/* ФИНАЛЬНЫЙ БЛОК: ОТДЕЛ ОБСЛУЖИВАНИЯ */}
  <ConstrainedContactBanner
    title="Связаться с отделом Обслуживания"
    phone="+7 (4932) 37-25-55 (доб. 100)"
    email="snv@it37.ru"
    buttonText="Оставить заявку на ремонт или обслуживание"
    id="contact-block"
  />

  <Footer />
</MainLayout>

<style>
    /* proactive-layout теперь применяется к внутреннему div и гарантированно работает как Flexbox */
    .proactive-layout {
        display: flex; /* Активируем Flexbox */
        align-items: flex-start;
        gap: 40px;
        margin-top: 60px;
    }

    /* !!! Используем calc() для гарантии 40/60, компенсируя отступ (gap) !!! */
    
    /* Текстовый блок - 40% */
    .proactive-layout :global(.text-block) {
        flex: 0 0 calc(40% - 20px); /* 40% минус половина отступа */
    }
    
    /* Визуальный блок - 60% */
    .proactive-layout :global(.viz-block) {
        flex: 0 0 calc(60% - 20px); /* 60% минус половина отступа */
    }
    
    /* Медиа-запрос: на маленьких экранах возвращаем элементы в колонку */
    @media (max-width: 900px) {
        .proactive-layout {
            flex-direction: column;
            align-items: center;
            gap: 20px; /* Уменьшаем отступ на мобильных */
        }
        
        /* На мобильных экранах оба блока занимают 100% */
        .proactive-layout :global(.text-block),
        .proactive-layout :global(.viz-block) {
            flex: 1 1 100%;  
            max-width: 100%;
        }
    }
</style>