---
import MainLayout from '@/layouts/MainLayout.astro'; // CORRECT: Restore MainLayout
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import ServicesGrid from '@/components/ServicesGrid.astro';
import MetrologyBlock from '@/components/MetrologyBlock.astro';
import Dashboard from '@/layouts/Dashboard.astro';
import ContactForm from '@/components/ContactForm.astro';
---

<MainLayout title="IT37 | Интеллектуальный Инжиниринг" activeLink="Главная">
    <Header activeLink="Главная" />

    <div class="grid-bg"></div>
    <div class="ai-brain"></div>

    <section class="hero">
        <div class="container">
            <div class="ai-badge">System Online: v.3.0 | AI-Driven</div>
            <h1>ИТ-ИНЖИНИРИНГ <br> ДЛЯ <span>ПРОМЫШЛЕННОГО</span><br> УЧЕТА</h1>
            <p class="hero-desc">
                Группа компаний **IT37**. Мы используем искусственный интеллект для проектирования, монтажа, диспетчеризации и метрологического обслуживания узлов учета. Максимизируем эффективность.
            </p>
            <a href="#services" class="btn">Начать проект &darr;</a>
        </div>
    </section>

    <section id="dashboard" class="section">
        <div class="container">
            <div style="margin-bottom: 40px;">
                <h2>AI-Аналитика: Эффективность систем</h2>
                <p style="color:var(--text-gray)">Реальные данные эффективности внедрения наших IT-решений.</p>
            </div>
            <Dashboard />
        </div>
    </section>

    <ServicesGrid />

    <MetrologyBlock />

    <ContactForm />

    <Footer />
</MainLayout>

<style>
    .hero {
        /* 
         * FIX: Using calc() with CSS variable (--header-height) 
         * to accurately offset the sticky header height 
         * and add an aesthetic top margin (3rem).
        */
        padding-top: calc(var(--header-height) + 3rem); 
    }
    .ai-brain {
        position: absolute; right: -10%; top: 20%; width: 600px; height: 600px;
        background: radial-gradient(circle, var(--secondary) 0%, transparent 70%);
        opacity: 0.2; filter: blur(60px); animation: pulse 5s infinite alternate;
    }
    @keyframes pulse { 0% { opacity: 0.2; transform: scale(1); } 100% { opacity: 0.4; transform: scale(1.1); } }
</style>